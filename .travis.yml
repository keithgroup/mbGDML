language: python
python:
- 3.9
install:
- pip install ase bayesian-optimization cclib matplotlib natsort numpy scipy==1.7.3 umap-learn
- pip install pytest-cov codecov coverage bump2version
- pip install sphinx==4.5.0 furo==2022.04.07
script:
- pip install .
after_success:
- pytest --cov=./
- "./docs/build-docs.sh"
- codecov
deploy:
  - provider: pages
    skip-cleanup: true
    local_dir: docs/html/
    github-token: "$GITHUB_TOKEN"
    keep-history: true
    target_branch: gh-pages
    on:
      branch: main
      repo: keithgroup/mbGDML
  - provider: pypi
    username: "__token__"
    password:
      secure: "wtwnYjFfg5mAa89KibSaILcYOQsC3xChRXYUvLC5J1PC9ukZbRacQXMkkUXGafrc+VVVup7pRL8AdSmhwtQxhL9ESkeu8aONwH5lHYPdAjrcEhMTNjDsSBSjNdCkB7PzYSYH9r9JhIlOpUu6NbgGlBBgwrNW0/70tXPLfexwj/BE3ZGT7SPzDBX6T2QXgsf/T6q6Kc6S2xwjxkDl6K42bDS72jFmPgeq+9JRMbE2MAd0EffvGBuiequPt507oOFIjP+37g+qqhj+hLRho0H3sEnH5N6CuCpMDa2xfI3s4a9uJ2htzx1SEJomJiWE5WB+MxhIdBEg9/tYbsSfrTR0gFvBBbCkKX8G/5lZCLua4eEYVvszh6mJwRtn5s2CyyhxdrrcmZuslunBtrc7eHjS4KBbpTu6dcEZ/aLxEgGQrnHqGC7iiF2CpHUcbJ08MBCJOfHRhtExEdzV3QbpQ3DOi6gVCjpnKmkuA1SMidIzqaqOmr64YyIxLca/EDyXtLbjm+V/CvokGGt4DUfrjMBPaqgcFyxZ7/OCYbUHc6omdj68Ds72PlJ9fFwTISpdm7UI687u+RBlDUXby3h4juKIJXO7D7IwY4mUqQDJz1fiwP4PMt/fD4Eb6OzsBNFOLEvL8pS84m5SmYY7eDBY0FVrmb/8tFrtuXFnsWZNpKtii08="
    on:
      tags: true
