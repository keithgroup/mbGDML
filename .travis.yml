language: python
python:
  - 3.9
install:
  - pip install natsort mako umap-learn bayesian-optimization matplotlib
  - pip install pytest-cov codecov coverage bump2version
  - pip install sphinx==4.5.0 furo==2022.04.07
script:
  - pip install .
after_success:
  - pytest --cov=./
  - ./docs/build-docs.sh
  - codecov
deploy:
  provider: pages
  skip-cleanup: true
  local_dir: docs/html/
  github-token: $GITHUB_TOKEN
  keep-history: true
  target_branch: gh-pages
  on:
    branch: main
    repo: keithgroup/mbGDML
